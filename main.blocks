<xml xmlns="https://developers.google.com/blockly/xml"><variables><variable id="X4SMm`K3A%7qIxLhW;93">command</variable><variable id="rky:G^oLQdWytNX^FjuA">currentWD</variable><variable id="#a+,+d9TZuq#[Hxu33bm">mnemonics</variable><variable id=".//p[D/Lv$!4~5Cn+rcL">currentParam</variable></variables><comment id="R0U)ah_w|$@`co9WhjyA" data="0" x="0" y="0" h="120" w="480">let mnemonics = ["temp", "humid", "press", "wspeed", "wdir", "light"]</comment><comment id="r6oiuR{U%fjf5`5A-=-x" data="1" x="0" y="0" h="120" w="480">serial.redirect( SerialPin.P15, SerialPin.P14, BaudRate.BaudRate9600 )</comment><block type="pxt-on-start" id="l;DKUq8AakacTn68fWx#" x="430" y="10"><statement name="HANDLER"><block type="typescript_statement" id="^R_DM(|g;jK-Wbv)45jf" editable="false"><mutation xmlns="http://www.w3.org/1999/xhtml" line0="let currentWD:number = 0" numlines="1" declaredvars="currentWD"></mutation><next><block type="variables_set" id="jglI_4UlhUZV6h(NMJ=6"><field name="VAR" id="#a+,+d9TZuq#[Hxu33bm">mnemonics</field><value name="VALUE"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="lists_create_with" id="atMJnoyeXc@VXRNE?fwz" inline="false"><mutation items="8"/><value name="ADD0"><shadow type="text" id="+D_(!Tmp/nG^C%T2.)]_"><field name="TEXT">temp</field></shadow></value><value name="ADD1"><shadow type="text" id="nh5pQc(||tGv1Fu+K+!E"><field name="TEXT">tempubit</field></shadow></value><value name="ADD2"><shadow type="text" id="rnJ35,p3!3F4.gWm=$1m"><field name="TEXT">humid</field></shadow></value><value name="ADD3"><shadow type="text" id="9~5Ad(]^d!5UBcOR[z6R"><field name="TEXT">press</field></shadow></value><value name="ADD4"><shadow type="text" id="x6_?Yu(66,efaxiqE)c~"><field name="TEXT">wspeed</field></shadow></value><value name="ADD5"><shadow type="text" id="X_3$@5ySR9l8?ZGX~od}"><field name="TEXT">wdir</field></shadow></value><value name="ADD6"><shadow type="text" id="~8d8mxV~7]3#s;|x/,b`"><field name="TEXT">rain</field></shadow></value><value name="ADD7"><shadow type="text" id="VvC05FesN[B;j6+uk}{/"><field name="TEXT">light</field></shadow></value></block></value><next><block type="weatherbit_startRainMonitoring" id="5k*j1oADk9epOxx1LcT9"><next><block type="device_pause" id="!}V19bs#45kc55{F}m?}"><value name="pause"><shadow type="timePicker" id="TMI-KlL36DCV91/9k7H:"><field name="ms">1000</field></shadow></value><next><block type="weatherbit_setupBME280" id="IUxCl[[#dU%HmJO{n9UU"><next><block type="device_pause" id="mHGZZ9oaGdBSX5FHQy?k"><value name="pause"><shadow type="timePicker" id="R-|3QM=|1Y21Wxw!XPl)"><field name="ms">1000</field></shadow></value><next><block type="serial_redirect_to_usb" id="yY0kBrJo#.l/8dA6P}5G"><comment pinned="false" h="80" w="160">Seems that startWindMonitoring is not necessary and intereferes with startRainMonitoring...&#10;weatherbit.startWindMonitoring()</comment></block></next></block></next></block></next></block></next></block></next></block></next></block></statement></block><block type="serial_on_data_received" id="1,{:I{~HS24xi$ax1V4M" x="19" y="365"><value name="delimiters"><shadow type="serial_delimiter_conv"/><block type="text" id="?T3j@+?yY$wsO1`}NYM^"><field name="TEXT">REQ:</field></block></value><statement name="HANDLER"><block type="serial_writeline" id="d=.#^*V07|Xa~dR1=S:$"><value name="text"><shadow type="text" id="Gu+ZN*7@klQ{hF-4|1YO"><field name="TEXT">Nu hände det!</field></shadow></value><next><block type="variables_set" id="XP|DBcN!N`oh6w.zrgxn"><field name="VAR" id="X4SMm`K3A%7qIxLhW;93">command</field><value name="VALUE"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="serial_read_line" id="(,UVy^PMuG1K{GFL9Qsb"/></value><next><block type="typescript_statement" id="1;N%/q@Lis?o/+C~-x$?" editable="false"><mutation xmlns="http://www.w3.org/1999/xhtml" line0="command.substr(5,command.length()-4);" numlines="1"></mutation></block></next></block></next></block></statement></block><block type="device_forever" id="BJyP!O6.9/f*NXE2JfLp" x="837" y="370"><statement name="HANDLER"><block type="pxt_controls_for_of" id="~C.5V9l/D^fFd4Dwr2oC"><comment pinned="false" h="80" w="160">weatherbit.startWeatherMonitoring()</comment><value name="VAR"><shadow type="variables_get_reporter" id="TX8,{WpTXWq$`qjA.:4("><field name="VAR" id=".//p[D/Lv$!4~5Cn+rcL">currentParam</field></shadow></value><value name="LIST"><block type="variables_get" id="$#siPEU,_wCLT%8wE|w|"><field name="VAR" id="#a+,+d9TZuq#[Hxu33bm">mnemonics</field></block></value><statement name="DO"><block type="serial_writevalue" id="]/sEfZ[wPGGxuZx-Y/mb"><value name="name"><block type="variables_get" id="|-SEZ}fIW0b%4R1YH^nM"><field name="VAR" id=".//p[D/Lv$!4~5Cn+rcL">currentParam</field></block></value><value name="value"><block type="function_call_output" id="i!YIk-3=i~Wb?;cCLy3V"><mutation name="readWeatherSensor" functionid="QP;Wc7V/Y@vPvpQP_4l)"><arg name="queryParam" id="mvrop2xpb957tl3td906" type="string"/></mutation><value name="mvrop2xpb957tl3td906"><shadow type="text" id="B)bg9_3=nGnSAJ)Z~Hby"><field name="TEXT">abc</field></shadow><block type="variables_get" id="9hlO)M_!Rr;a%]+Wz#x5"><field name="VAR" id=".//p[D/Lv$!4~5Cn+rcL">currentParam</field></block></value></block></value><next><block type="device_pause" id="*Y):%WGDK8?+|)[TK)7e"><value name="pause"><shadow type="timePicker" id="?~B2YH]mfBXZpme7K[t#"><field name="ms">1000</field></shadow></value></block></next></block></statement></block></statement></block><block type="function_definition" id="Vg@ADFiT!,bc|`){Gf`I" x="437" y="749"><mutation name="windDirection" functionid="9ucIbKjTi!PC2D=|{hS]"><arg name="direction" id="4g1xl0ynzqvwmveyhypgs" type="string"/></mutation><field name="function_name">windDirection</field><comment pinned="false" h="80" w="160">There is an issue with the rain interupt – intereferes with the serial</comment><value name="4g1xl0ynzqvwmveyhypgs"><shadow type="argument_reporter_string" id="1c-o3l#t8|o%gnPhV{dX"><field name="VALUE">direction</field></shadow></value><statement name="STACK"><block type="serial_writeline" id="B4r(lsiGQuG)uPAIcnsp"><value name="text"><block type="argument_reporter_string" id="=qZ[ouY%uZ#0k%49!GDE"><field name="VALUE">direction</field></block></value><next><block type="typescript_statement" id=".3MC?%UR-|JT`V`fktr|" editable="false"><mutation xmlns="http://www.w3.org/1999/xhtml" line0="switch (direction) {" line1="            case 'N': currentWD= 0;break;" line2="            case 'NE': currentWD= 45;break;" line3="            case 'E': currentWD= 90;break;" line4="            case 'SE': currentWD= 135;break;" line5="            case 'S': currentWD= 180;break;" line6="            case 'SW': currentWD= 225;break;" line7="            case 'W': currentWD= 270;break;" line8="            case 'NW': currentWD= 315;break;" line9="            case '???': break;" line10="            default: break; " line11="        }" numlines="12"></mutation><next><block type="function_return" id="Jf~(sF*Y@Ge=QcDC0l#A"><mutation xmlns="http://www.w3.org/1999/xhtml" no_return_value="false"></mutation><value name="RETURN_VALUE"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="variables_get" id="CI{FOb}CGTw|[fl.RyQD"><field name="VAR" id="rky:G^oLQdWytNX^FjuA">currentWD</field></block></value></block></next></block></next></block></statement></block><block type="function_definition" id="Hb-w@ruCn^iIl!e}(I99" x="943" y="750"><mutation name="readWeatherSensor" functionid="QP;Wc7V/Y@vPvpQP_4l)"><arg name="queryParam" id="mvrop2xpb957tl3td906" type="string"/></mutation><field name="function_name">readWeatherSensor</field><comment pinned="false" h="80" w="160">@param {string} queryParam - The mnemonic for the sensor</comment><value name="mvrop2xpb957tl3td906"><shadow type="argument_reporter_string" id="]c1Y.Z,A^XP0Cp,}fcEN"><field name="VALUE">queryParam</field></shadow></value><statement name="STACK"><block type="typescript_statement" id="NkteE(j/3oU@$MhAmp:/" editable="false"><mutation xmlns="http://www.w3.org/1999/xhtml" line0="switch(queryParam) {" line1="        case 'temp':" line2="            return (weatherbit.temperature() / 100);break;" line3="        case 'tempubit':" line4="            return (input.temperature());break;" line5="        case 'humid':" line6="            return (weatherbit.humidity() / 1024);break;" line7="        case 'press':" line8="            return (weatherbit.pressure() / 25600);break;" line9="        case 'alt':" line10="            return weatherbit.altitude();break;" line11="        case 'wspeed':" line12="            return weatherbit.windSpeed() / 2.2369362920544;break;" line13="        case 'wdir':" line14="            return windDirection(weatherbit.windDirection()); break;      " line15="        case 'rain':" line16="            return weatherbit.rain() / 25.4; break;" line17="       case 'light':" line18="            return input.lightLevel(); break;" line19="        case 'compass':" line20="            return input.compassHeading(); break;" line21="        default:" line22="            return 0;" line23="    }" numlines="24"></mutation></block></statement></block></xml>